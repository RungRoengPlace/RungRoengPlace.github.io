import{c as h,r as c,b as i,j as e,a as N,f as m,g as w,h as y,i as v,S as n}from"./index-DwUU5yaf.js";import{C as E}from"./circle-check-Cy4Nz6fm.js";const k=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],C=h("circle-x",k);const S=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],U=h("lock",S),B=()=>{const[l,o]=c.useState([]),[p,d]=c.useState(!0);c.useEffect(()=>{u()},[]);const u=async()=>{d(!0);try{const t=await i.getUsers(),s=["member","guard","treasurer","admin"],a=t.sort((r,j)=>s.indexOf(r.role)-s.indexOf(j.role));o(a)}catch(t){console.error(t)}d(!1)},f=async t=>{const s=!t.isEnabled;try{await i.saveUser({...t,isEnabled:s}),o(l.map(r=>r.role===t.role?{...r,isEnabled:s}:r)),n.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0}).fire({icon:"success",title:"บันทึกสถานะเรียบร้อย"})}catch{n.fire("Error","Failed to update status","error")}},b=async t=>{const{value:s}=await n.fire({title:`เปลี่ยนรหัสผ่าน: ${x(t.role)}`,input:"text",inputValue:t.password,inputLabel:"รหัสผ่านใหม่",showCancelButton:!0,confirmButtonColor:"#0f766e"});if(s)try{await i.saveUser({...t,password:s}),o(l.map(a=>a.role===t.role?{...a,password:s}:a)),n.fire("สำเร็จ","เปลี่ยนรหัสผ่านเรียบร้อยแล้ว","success")}catch{n.fire("Error","Failed to update password","error")}},x=t=>{switch(t){case"member":return"สมาชิก";case"guard":return"รปภ.";case"treasurer":return"เหรัญญิก";case"admin":return"ผู้ดูแลระบบ";default:return t}},g=t=>{switch(t){case"member":return e.jsx(m,{className:"text-blue-500"});case"guard":return e.jsx(v,{className:"text-orange-500"});case"treasurer":return e.jsx(y,{className:"text-teal-500"});case"admin":return e.jsx(w,{className:"text-purple-500"});default:return e.jsx(m,{})}};return p?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading settings..."}):e.jsx("div",{className:"space-y-6 animate-fade-in-up",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-6 text-left text-sm font-bold text-slate-600",children:"ประเภทผู้ใช้"}),e.jsx("th",{className:"p-6 text-left text-sm font-bold text-slate-600",children:"สถานะ"}),e.jsx("th",{className:"p-6 text-left text-sm font-bold text-slate-600",children:"จัดการรหัสผ่าน"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:l.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[e.jsx("td",{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[g(t.role),e.jsx("span",{className:"font-bold text-slate-700 text-lg",children:x(t.role)})]})}),e.jsx("td",{className:"p-6",children:e.jsxs("button",{onClick:()=>f(t),className:N("flex items-center space-x-2 px-4 py-2 rounded-full font-bold text-sm transition-all duration-300",t.isEnabled?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-100 text-red-700 hover:bg-red-200"),children:[t.isEnabled?e.jsx(E,{size:16}):e.jsx(C,{size:16}),e.jsx("span",{children:t.isEnabled?"เปิดใช้งาน":"ปิดใช้งาน"})]})}),e.jsx("td",{className:"p-6",children:e.jsxs("button",{onClick:()=>b(t),className:"flex items-center space-x-2 px-4 py-2 rounded-lg border border-green-200 text-green-700 hover:bg-green-50 font-bold text-sm transition-all",children:[e.jsx(U,{size:16}),e.jsxs("span",{children:["แก้ไขรหัสผ่าน (",t.isEnabled?"เปิดใช้งาน":"ปิด",")"]})]})})]},t.role))})]})})})};export{B as UserManagement};
