import{r as n,b as o,j as e,U as x,S as m}from"./index-BLdxFrRq.js";import{P as j,T as N}from"./trash-Bcp4THCP.js";import{X as v}from"./x-CtYXeOf-.js";const k=()=>{const[r,u]=n.useState([]),[h,c]=n.useState(!0),[p,l]=n.useState(!1),[s,a]=n.useState({houseNo:"",name:"",fee:500,specialNote:""});n.useEffect(()=>{i()},[]);const i=async()=>{c(!0);const t=await o.getMembers();u(t),c(!1)},b=t=>{a(t),l(!0)},g=async t=>{if(!t)return;(await m.fire({title:"ยืนยันการลบ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"ลบ",cancelButtonText:"ยกเลิก"})).isConfirmed&&(await o.deleteMember(t),i())},f=async t=>{t.preventDefault(),await o.saveMember(s),l(!1),i(),m.fire({icon:"success",title:"บันทึกเรียบร้อย",timer:1500,showConfirmButton:!1})};return h?e.jsx("div",{className:"p-4 text-center text-slate-400",children:"กำลังโหลดรายชื่อ..."}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 px-2",children:[e.jsxs("h3",{className:"font-bold text-slate-700",children:["รายชื่อสมาชิกทั้งหมด (",r.length,")"]}),e.jsxs("button",{onClick:()=>{a({houseNo:"",name:"",fee:500,specialNote:""}),l(!0)},className:"bg-indigo-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 text-sm hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200 transform hover:scale-105 active:scale-95",children:[e.jsx(x,{size:16}),e.jsx("span",{children:"เพิ่มสมาชิก"})]})]}),e.jsx("div",{className:"overflow-x-auto max-h-[500px]",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 uppercase font-bold text-xs sticky top-0 z-10 shadow-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 bg-slate-50",children:"บ้านเลขที่"}),e.jsx("th",{className:"px-4 py-3 bg-slate-50",children:"ชื่อ-สกุล"}),e.jsx("th",{className:"px-4 py-3 text-right bg-slate-50",children:"ค่าส่วนกลาง"}),e.jsx("th",{className:"px-4 py-3 bg-slate-50",children:"Note"}),e.jsx("th",{className:"px-4 py-3 text-center bg-slate-50",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map((t,d)=>e.jsxs("tr",{className:"hover:bg-indigo-50/20 transition-colors group",children:[e.jsx("td",{className:"px-4 py-3 font-bold text-slate-700",children:t.houseNo}),e.jsx("td",{className:"px-4 py-3 text-slate-600",children:t.name}),e.jsx("td",{className:"px-4 py-3 text-right font-mono text-indigo-700 opacity-80",children:t.fee.toLocaleString()}),e.jsx("td",{className:"px-4 py-3 text-red-400 italic text-xs",children:t.specialNote}),e.jsxs("td",{className:"px-4 py-3 flex justify-center space-x-2 opacity-60 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>b(t),className:"text-amber-500 hover:text-amber-700 p-1 hover:bg-amber-50 rounded",children:e.jsx(j,{size:16})}),e.jsx("button",{onClick:()=>g(t.rowIndex),className:"text-red-400 hover:text-red-600 p-1 hover:bg-red-50 rounded",children:e.jsx(N,{size:16})})]})]},d))})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in-up",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all",children:[e.jsxs("div",{className:"p-4 bg-indigo-50 border-b border-indigo-100 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-indigo-900 flex items-center",children:[e.jsx(x,{size:18,className:"mr-2"}),s.rowIndex?"แก้ไขสมาชิก":"เพิ่มสมาชิกใหม่"]}),e.jsx("button",{onClick:()=>l(!1),className:"text-indigo-400 hover:text-indigo-600 hover:bg-indigo-100 rounded-full p-1",children:e.jsx(v,{size:20})})]}),e.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"บ้านเลขที่"}),e.jsx("input",{type:"text",value:s.houseNo,onChange:t=>a({...s,houseNo:t.target.value}),className:"w-full border-slate-200 rounded-lg p-2.5 bg-slate-50 outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow",required:!0,placeholder:"เช่น 101/1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"ชื่อ-สกุล"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>a({...s,name:t.target.value}),className:"w-full border-slate-200 rounded-lg p-2.5 bg-slate-50 outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow",required:!0,placeholder:"ชื่อ นามสกุล"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"ค่าส่วนกลาง (บาท)"}),e.jsx("input",{type:"number",value:s.fee,onChange:t=>a({...s,fee:Number(t.target.value)}),className:"w-full border-slate-200 rounded-lg p-2.5 bg-slate-50 outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Special Note"}),e.jsx("input",{type:"text",value:s.specialNote,onChange:t=>a({...s,specialNote:t.target.value}),className:"w-full border-slate-200 rounded-lg p-2.5 bg-slate-50 outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow",placeholder:"หมายเหตุเพิ่มเติม"})]}),e.jsxs("div",{className:"pt-4 flex justify-end space-x-3 border-t border-slate-50 mt-4",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 text-slate-500 hover:bg-slate-50 rounded-lg font-medium",children:"ยกเลิก"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 shadow-lg shadow-indigo-200 font-bold transform hover:scale-105 active:scale-95 transition-all",children:"บันทึก"})]})]})]})})]})};export{k as Members};
